<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Creating assistants for DevAssistant &mdash; Fedora Developer Portal</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="canonical" href="http://developer.fedoraproject.org/tools/devassistant/developers.html">

  <!-- Link to Sitemap -->
  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

  <link href="/css/main.css" rel="stylesheet" media="screen, print">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!--  <link href="/static/css/patternfly.min.css" rel="stylesheet" media="screen, print"> -->
  <script src="/static/components/jquery/dist/jquery.min.js"></script>
  <script src="/static/components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/static/components/datatables/media/js/jquery.dataTables.js"></script>
  <script src="/static/js/patternfly.min.js"></script>

  <!-- Site search -->
  <script src="/js/search.min.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    $(function() {
      $('#search-query').lunrSearch({
        indexUrl: '/js/index.json',   // Url for the .json file containing search index data
        results : '#search-results',  // selector for containing search results element
        entries : '.entries',         // selector for search entries containing element (contained within results above)
        template: '#search-results-template'  // selector for Mustache.js template
      });
    });
  </script>
</head>

  <body>
    <div class="container" id="header">
  <div class="row" id="top">
    <div class="col-sm-2" id="logo-col">
      <div class="text-center">
        <a href="/">
          <img src="/static/logo.png" style="height: 46px; width: 152px;">
          <span>Fedora Developer Portal</span>
        </a>
      </div>
    </div>
    <div class="col-sm-7">
      <nav>
  <ul class="nav navbar-nav">
    <li class=" active ">
      <a href="/tools.html">Get tools</a>
    </li>
    <li class="">
      <a href="/tech.html">Languages &amp; databases</a>
    </li>
    <li class="">
      <a href="/deployment.html">Deploy and distribute</a>
    </li>
    <!--
    <li class="">
      <a href="/">Resources</a>
    </li>
    <li class="">
      <a href="/">Blogs</a>
    </li>
    -->
  </ul>
</nav>

    </div>
    <div class="col-sm-3">
      
  <form class="input-group" id="search" action="/search.html" method="get">
    <input type="text" id="search-query" class="form-control" name="q" placeholder="Search" autocomplete="off">
    <span class="input-group-btn">
      <button class="btn btn-default glyphicon glyphicon-search" type="submit" aria-hidden="true"></button>
    </span>
  </form>
  <section id="search-results" style="display: none;">
    <div class="entries">
    </div>
  </section>

  
  <script id="search-results-template" type="text/mustache">
    {{#entries}}
      <article>
        <a href="{{url}}">{{title}}</a>
      </article>
    {{/entries}}
  </script>
  
</div>


    </div>
  </div>
</div>

    <div class="title container" id="">
      <div class="container">
        <div class="row">
          <div class="col-sm-6 col-xs-12" id="page-logo">
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
                  <img class="img-circle" src="/static/logo/devassistant.png">
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
                  <h1>DevAssistant</h1>
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          </div>
          <div class="col-sm-6 Xhidden-xs" id="page-description">
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
                  <p>Set up your development environment, publish your code, and do many of the chores that somehow keep you from the important stuff â€” writing your software.</p>
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        
        <div class="col-sm-3 col-sm-push-9">
          <div class="list-group">
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
                <a href="/tools/devassistant/about.html" class="list-group-item ">DevAssistant</a>
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
                <a href="/tools/devassistant/tutorials.html" class="list-group-item ">Getting started with DevAssistant</a>
                
              
            
              
            
              
            
              
            
              
                
                <a href="/tools/devassistant/developers.html" class="list-group-item  active ">Creating assistants for DevAssistant</a>
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                
                <a href="/tools/devassistant/notes.html" class="list-group-item ">More on DevAssistant</a>
                
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          </div>
        </div>
        <div class="col-sm-9 col-sm-pull-3">
          <h1 id="creating-assistants-for-devassistant">Creating assistants for DevAssistant</h1>

<p>This section is intended for developers that want to make their own assistants
for their project. If you want to learn how to use DevAssistant, read
<a href="tutorials.html">Getting Started with DevAssistant</a>. Furthermore, the tutorial is significantly
condensed to be as clear and short as possible. For a much more detailed
tutorial, visit <a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant.html">DevAssistant
documentation</a>.</p>

<h2 id="why-to-create-an-assistant">Why to create an assistant</h2>

<p>If you contribute to a software project, especially one that many contributors
work on, you can benefit greatly from having an assistant set suited precisely
to your project. Likewise, if you like working with a language that is not yet
covered by <a href="https://dapi.devassistant.org/all/">existing assistants</a>, you can
create a new assistant package that does just that.</p>

<p>While you can make your assitants without packaging and distributing them (more
on that
<a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/yaml/tutorial.html">here</a>),
we strongly suggest you start creating the whole package (DAPâ€”DevAssistant
Package), and this tutorial takes that into consideration.</p>

<h2 id="installing-the-dap-assistant">Installing the <code>dap</code> assistant</h2>

<p>If you have DevAssistant installed (to check that, see the <a href="about.html#installing-devassistant-on-fedora">installation
guide</a>), see if you also have the
DAP package for creating other DAPs. This command should return a line with
information about an installed package named <code>dap</code>:</p>

<pre><code>$ da pkg list --installed | grep dap
</code></pre>

<p>If the command returned nothing, either install the package through Fedoraâ€™s
DNF:</p>

<pre><code>$ sudo dnf install devassistant-dap-dap
</code></pre>

<p>or install the DAP locally for your account only:</p>

<pre><code>$ da pkg install dap
</code></pre>

<h2 id="creating-the-package">Creating the package</h2>

<p>With all the necessary bits and pieces in place, you can start with creating
the package. Go to your working directory and create a new DAP with the desired
<a href="about.html#assistants">assistants roles</a> prepared (any of<code>create</code>, <code>tweak</code>,
<code>prepare</code>, <code>extras</code>):</p>

<pre><code>$ da create dap --name foo --crt --prep
</code></pre>

<p>The above command creates a directory named <code>dap-foo</code> (<code>dap-</code> is added due to
naming conventions), and in it a structure with assistants, in this case for
the creation and preparation of projects. There are also directories for
documentation, auxiliary files, and icons (useful for making your assistant
accessible to GUI users).</p>

<pre><code>dap-foo/
â”œâ”€â”€ assistants/
â”‚Â Â  â”œâ”€â”€ crt/
â”‚Â Â  â”‚Â Â  â””â”€â”€ foo.yaml
â”‚Â Â  â””â”€â”€ prep/
â”‚Â Â      â””â”€â”€ foo.yaml
â”œâ”€â”€ doc/
â”‚Â Â  â””â”€â”€ foo/
â”‚Â Â      â””â”€â”€ LICENSE
â”œâ”€â”€ files/
â”‚Â Â  â””â”€â”€ foo/
â”œâ”€â”€ icons/
â”‚Â Â  â””â”€â”€ foo/
â””â”€â”€ meta.yaml
</code></pre>

<p>The file <code>meta.yaml</code> contains metadata about the whole package, the author, and
dependencies. It is important you fill it in
<a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/packaging_and_distributing.html#meta-yaml-explained">properly</a>
because otherwise you will not be able to package it or publish it on the
<a href="https://dapi.devassistant.org">DevAssistant Package Index (DAPI)</a>. Do not
forget to include a licence of your choice too.</p>

<h2 id="writing-sample-assistant">Writing sample assistant</h2>

<p>An assistant is a <a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/yaml.html">YAML
file</a>
with several sections that describe what it does.  In this chapter, we will go
through the typical ones. The full description can be found in the
<a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/yaml.html">documentation</a>.
If you do not like the idea of writing a YAML assistant, you can <a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/pingpong.html">use a
language of your
choice</a>
for most parts of the assistant (so far only Python support is implemented).</p>

<h3 id="header">Header</h3>

<p>The header information contains data displayed to users when looking for the
right assistant for their use case.</p>

<pre><code>fullname: Assistant for Foo Bar Baz
description: More verbose description of what it does
</code></pre>

<h3 id="dependencies">Dependencies</h3>

<p>The dependencies section describes what packages should be installed by which
package manager. There are many package managers supported, to name a few: Yum,
DNF, gem, pip, pacman, and more. To indicate that e. g. RPM packages <code>baz</code> and
<code>qux</code>, and a Python (pip) package <code>foobar</code> should be installed, form the
dependencies section the following way:</p>

<pre><code>dependencies:
  - rpm: ['baz', 'qux']
  - pip: ['foobar']
</code></pre>

<h3 id="arguments">Arguments</h3>

<p>To allow the user to provide input, arguments are needed. Either you specify
the argument properties yourself (in this case, a mandatory argument named
<code>name</code> specified by flags <code>-n</code> and <code>--name</code>):</p>

<pre><code>args:
  name:
    flags: [-n, --name]
    required: True
    help: A short description of the argument
</code></pre>

<p>or you can use a definition from a so-called
<a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/yaml/snippets.html">snippet</a>
(think of it a header file or a library), in this case a snippet named
<code>common_args</code>:</p>

<pre><code>args:
  name:
    use: common_args
</code></pre>

<p>If you use a defintion from a snippet, you must declare a dependency on it in
the <code>meta.yaml</code> file in your package (by adding a <code>dependencies:
['common_args']</code> to the file.</p>

<p>Argumentsâ€™ values are automatically stored in a variable of the same name, in
this case, <code>$name</code>.</p>

<h3 id="files">Files</h3>

<p>You assistant may include other files than just the assistants, for example
those that will be placed in the projectâ€™s directory on creation. To include a
file named <code>foo.txt</code>, copy it into the <code>files</code> subdirectory in the DAPâ€™s
structure, and add a reference to it to the <code>files</code> section in the assistant
under an appropriate handle, in this case e. g. <code>foo</code>:</p>

<pre><code>files:
  foo: &amp;foo
    source: foo.txt
</code></pre>

<p>Elsewhere in the assistant, the file will be only referred to by its handle
<code>foo</code>. Repeating the handle name with <code>&amp;</code> is necessary due to technical
limitations of the current implementation.</p>

<h3 id="run-section">Run Section</h3>

<p>The run section is a procedural section where you put the commands that should
be executed during the assistantâ€™s run. Typically, you create a directory to
put the project into, copy the files from the <code>files</code> section, start services,
emit messages to be logged, or push the code to GitHub. For the full list of
possible commands, have a look at <a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant/yaml/run_sections_reference.html">run section
reference</a>.</p>

<p>The run section consists of a list of commands (each item of the list starting
with <code>-</code>), their arguments, and other logic. To illustrate this better, let us
have a look at this sample run section:</p>

<pre><code>run:
- setup_project_dir:
    from: name
    on_existing: fail
- cl: cd $contdir/$topdir
- $date~: $(date)
- log_i: Run started at $date
- cl: cp *foo .
- if $(test -f foo.txt):
    - log_i: Foo.txt copied successfully
- else:
    - log_e: Error copying Foo.txt
</code></pre>

<p>As fairly obvious, the command <code>setup_project_dir</code> creates the project dir from
the variable <code>name</code>, as specified, and will fail if the directory already
exists. What is not obvious is that in addition to that, it sets the variables
<code>$contdir</code> (the directory one level above the project directory) and <code>$topdir</code>
(the project directory), which will be used shortly.</p>

<p>The next command, <code>cl: cd $contdir/$topdir</code>, executes a shell command that
changes the current working directory to the projectâ€™s directory. If you want
to simply execute calls in the shell, call the <code>cl</code> (<em>command line</em>) command.
If you want to assign the result of the call to a variable or check the result
in an <code>if</code> clause, use the <code>$(...)</code> syntax like in shell instead, as shown on
the next line. The line in question, <code>$date~: $(date)</code>, is a variable
assignment. In this case, it assigns the result of calling the shell command
<code>date</code> into a variable named <code>$date</code>. The tilde (<code>~</code>) is there so that
<code>$(date)</code> is interpreted. If it was not there, the assigned value would be the
string <code>$(date)</code> itself. Generally speaking, all commands can be appended with
the tilde to force interpreting the value on the right side of the colon.</p>

<p>The commands <code>log_i</code>, <code>log_w</code>, and <code>log_e</code> are all used for logging on
different levels (<code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>). Unlike the first two, <code>log_e</code>
also stops the execution of the assistant as it means fatal error that
DevAssistant can not recover from.</p>

<p>The last thing not yet covered in this little example is the <code>if..else</code>
construct. It works just how you expect it to, except not only can you query
shell command results (<code>test -f foo.txt</code>) in the example, but also the values
of variables (<code>if defined $variable</code>, for example) and
<a href="http://doc.devassistant.org/en/latest/developer_documentation/command_reference.html">more</a>.</p>

<h3 id="the-whole-assistant">The whole assistant</h3>

<p>The sections that were described above add up to a simple little assistant that
looks like this:</p>

<pre><code>fullname: Assistant for Foo Bar Baz
description: More verbose description of what it does

dependencies:
  - rpm: ['baz', 'qux']
  - pip: ['foobar']

args:
  name:
    use: common_args

files:
  foo: &amp;foo
    source: foo.txt

run:
- setup_project_dir:
    from: name
    on_existing: fail
- cl: cd $contdir/$topdir
- $date~: $(date)
- log_i: Run started at $date
- cl: cp *foo .
- if $(test -f foo.txt):
    - log_i: Foo.txt copied successfully
- else:
    - log_e: Error copying Foo.txt
</code></pre>

<p>Please, bear in mind that this is a small and non-exhaustive example of what
can be done with DevAssistant. To see the whole set of options and a more
complicated example, visit the <a href="http://doc.devassistant.org/en/latest/developer_documentation/create_assistant.html">Create Your Own
Assistant</a>
section of the DevAssistant Documentation.</p>

<h2 id="packaging">Packaging</h2>

<p>When the assistants are created, you can prepare the whole package for
distribution, which is done by executing:</p>

<pre><code>$ da tweak dap pack
</code></pre>

<p>in the source directory. This command creates a properly formatted DAP from the
files present, and saves it under the name <code>dap-NAME-VERSION.dap</code>. To ensure
the DAP meets all the requirements for distribution, run:</p>

<pre><code>$ da pkg lint ./dap-NAME-VERSION.dap
</code></pre>

<p>The command outputs a list of problems that prevent the DAP from being used in
distribution. After the problems are sorted out, you can install the DAP by
running:</p>

<pre><code>$ da pkg install ./dap-NAME-VERSION.dap
</code></pre>

<p>or upload it to the <a href="https://dapi.devassistant.org">DAPI</a> for others to
consume. Use the command:</p>

<pre><code>$ da extra dap upload -d ./dap-NAME-VERSION.dap
</code></pre>

        </div>
        <div class="col-xs-12">
          <hr>
          <div id="ask-fedora">
            Have a question?
            
              <a href="//ask.fedoraproject.org/en/questions/scope:all/sort:age-desc/tags:devassistant/page:1/">Ask Fedora.</a>
            
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
  <div class="container">
    <div class="row footerlinks">
      <div class="col-sm-3 col-xs-6 widget">
        <h3 class="widget-title">About</h3>
        <div class="widget-body">
          <dl>
            <dd><a href="/about.html">About Developer Portal</a></dd>
            <dd><a href="//getfedora.org/en/sponsors">About Fedora</a></dd>
            <dd><a href="//getfedora.org/en/sponsors">Sponsors</a></dd>
            <dd><a href="http://fedoramagazine.org">Fedora Magazine</a></dd>
            <dd><a href="//fedoraproject.org/wiki/Legal:Main#Legal">Legal</a></dd>
          </dl>
          <ul class="list-inline">
            <li>
              <a class="btn-social btn-outline" href="//www.facebook.com/TheFedoraProject"><i class="fa fa-fw fa-facebook"></i></a>
            </li>
            <li>
              <a class="btn-social btn-outline" href="//plus.google.com/112917221531140868607"><i class="fa fa-fw fa-google-plus"></i></a>
            </li>
            <li>
              <a class="btn-social btn-outline" href="//twitter.com/fedora"><i class="fa fa-fw fa-twitter"></i></a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-sm-3 col-xs-6 widget">
        <h3 class="widget-title uppercase">Download</h3>
        <div class="widget-body">
          <dl>
            <dd><a href="//getfedora.org/en/workstation/download">Get Fedora Workstation</a></dd>
            <dd><a href="//getfedora.org/en/server/download">Get Fedora Server</a></dd>
            <dd><a href="//getfedora.org/en/cloud/download">Get Fedora Cloud</a></dd>
            <dd><a href="//spins.fedoraproject.org">Fedora Spins</a></dd>
            <dd><a href="//labs.fedoraproject.org">Fedora Labs</a></dd>
            <dd><a href="//arm.fedoraproject.org">Fedora ARM<span class="sup">&reg;</span></a></dd>
            <dd><a href="http://torrents.fedoraproject.org">Torrent Downloads</a></dd>
          </dl>
        </div>
      </div>
      <div class="col-sm-3 col-xs-6 widget">
        <h3 class="widget-title">Support</h3>
          <div class="widget-body">
            <dl>
              <dd><a href="//fedoraproject.org/wiki/Communicating_and_getting_help">Get Help</a></dd>
              <dd><a href="//ask.fedoraproject.org/">Ask Fedora</a></dd>
              <dd><a href="http://fedoraforum.org/">Forums</a></dd>
              <dd><a href="//fedoraproject.org/wiki/Common_F22_bugs">Common Bugs</a></dd>
              <dd><a href="//docs.fedoraproject.org/en-US/Fedora/22/html/Installation_Guide">Installation Guide</a></dd>
            </dl>
          </div>
        </div>
        <div class="col-sm-3 col-xs-6 widget">
          <h3 class="widget-title">Join</h3>
            <div class="widget-body">
            <dl>
              <dd><a href="//fedoraproject.org/wiki/Join">Join Fedora</a></dd>
              <dd><a href="http://fedoraplanet.org">Planet Fedora</a></dd>
              <dd><a href="//fedoraproject.org/wiki/SIGs">Fedora SIGs</a></dd>
              <dd><a href="//admin.fedoraproject.org/accounts/">Fedora Account System</a></dd>
              <dd><a href="http://fedoracommunity.org/">Fedora Community</a></dd>
            </dl>
          </div>
        </div>
      </div> <!-- /row of widgets -->
      <div class="row">
        <div class="col-md-2">
          <div class="widget-body">
            <a href="http://www.redhat.com/"><img alt="Red Hat Logo" src="/static/logo/redhat.png" class="rh-logo"></a>
          </div>
        </div>
        <div class="col-md-7">
          <div class="widget-body">
            <p class="sponsor">Fedora is sponsored by Red Hat.</p>
            <p class="sponsor"><a href="//www.redhat.com/en/technologies/linux-platforms/articles/relationship-between-fedora-and-rhel">Learn more about the relationship between Red Hat and Fedora Â»</a></p>
            <p class="copy">&copy; 2015 Red Hat, Inc. and others.</p>
          </div>
        </div>
        <!-- /row of widgets -->
      </div>
</footer>

  </body>
</html>
